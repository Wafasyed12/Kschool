<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Oswald", sans-serif, "Playfair Display", serif;
        }

        html, body {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .wrapper {
            display: flex;
            flex: 1;
        }

        .sidebar {
            width: 250px;
            background-color: rgba(52, 58, 64, 0.9);
            color: white;
            padding-top: 20px;
            position: fixed;
            height: 100%;
            top: 0;
            left: 0;
            transition: all 0.3s;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjU1IDI1NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMCAwQzM3Ljc1IDczLjc1IDEzMy4wNSAyMjAuNzUgMjU1IDIyMC43NVYyNTVIMFYwWiIgZmlsbD0iI0YwYTAwYSIvPgo8L3N2Zz4=');
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
        }

        .sidebar .top-bar {
            padding: 0 20px;
        }

        .sidebar .top-bar .front {
            font-size: 36px;
            font-weight: bold;
            color: #FFD700;
            padding-left: 20px;
        }

        .sidebar .nav-links {
            margin-top: 40px;
            padding-left: 0;
        }

        .sidebar .nav-links ul {
            list-style: none;
            padding: 0;
        }

        .sidebar .nav-links ul li {
            padding: 15px;
        }

        .sidebar .nav-links ul li a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-size: 20px;
            display: block;
            padding-left: 28px;
            transition: all 0.3s;
        }

        .sidebar .nav-links ul li a:focus,
        .sidebar .nav-links ul li a:active {
            border: 2px solid black;
        }

        .sidebar .nav-links ul li a:hover {
            color: rgba(255, 255, 255, 0.9);
            background-color: transparent;
            border: 1px solid white;
            border-radius: 5px;
        }

        .main-content {
            margin-left: 250px;
            flex: 1;
            padding: 40px;
            position: relative;
            font-size: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            background-color: #f8f9fa;
        }

        .dashboard-overview {
            width: 100%;
            max-width: 1200px;
            margin-bottom: 40px;
        }

        .dashboard-overview .card-deck {
            display: flex;
            gap: 20px;
            justify-content: space-between;
        }

        .dashboard-overview .card {
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            flex: 1;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .dashboard-overview .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .dashboard-overview .card .card-body {
            padding: 20px;
            text-align: center;
        }

        .dashboard-overview .card .card-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .dashboard-overview .card .card-text {
            font-size: 24px;
            font-weight: bold;
            color: darkslategrey;
        }

        .recent-activity,
        .class-schedule {
            width: 70%;
            max-width: 1200px;
            margin-bottom: 40px;
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .recent-activity h3,
        .class-schedule h3 {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
        }

        .recent-activity ul,
        .class-schedule ul {
            list-style: none;
            padding: 0;
        }

        .recent-activity ul li,
        .class-schedule ul li {
            font-size: 16px;
            color: #555;
            margin-bottom: 10px;
        }

        .quote-section {
            width: 100%;
            max-width: 1200px;
            text-align: center;
            margin-top: auto;
            margin-bottom: 20px;
        }

        .quote-section button {
            background-color: yellow;
            color: black;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .quote-section button:hover {
            background-color: grey;
            color: black;
        }

        .quote-section #quote {
            font-size: 18px;
            font-style: italic;
            color: #333;
            margin-top: 20px;
        }

        .footer {
            text-align: center;
            color: yellow;
            padding: 10px 0;
            background: rgba(0, 0, 0, 0.5);
            margin-top: 30px;
            width: 100%;
        }

        .footer p {
            margin: 0;
            font-size: 14px;
        }

        .user-info {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
        }

        .user-info .welcome-back {
            color: #555;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
                position: absolute;
                left: -200px;
                z-index: 10;
            }

            .sidebar.active {
                left: 0;
            }

            .main-content {
                margin-left: 0;
                padding: 20px;
            }

            .hamburger {
                display: block;
                color: white;
                font-size: 28px;
                position: absolute;
                top: 20px;
                left: 20px;
                z-index: 11;
            }

            .sidebar .top-bar .front,
            .sidebar .user-info {
                text-align: center;
            }

            .sidebar .nav-links ul li a {
                font-size: 16px;
            }
        }

        .hamburger {
            display: none;
        }
    </style>
    <script>
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('active');
        }

        function displayQuote() {
            const quotes = [
                "The best way to predict the future is to create it.",
                "Success is not the key to happiness. Happiness is the key to success.",
                "Education is the most powerful weapon which you can use to change the world.",
                "The beautiful thing about learning is that no one can take it away from you.",
                "Success usually comes to those who are too busy to be looking for it."
            ];
            const randomIndex = Math.floor(Math.random() * quotes.length);
            document.getElementById("quote").innerText = quotes[randomIndex];
        }
    </script>
</head>
<body>
    <div class="wrapper">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="top-bar">
                <div class="front">
                    <span class="kids">Kids'</span> <span class="garden">G</span>
                </div>
            </div>
            <div class="nav-links">
                <ul>
                    <li><a href="/students/add">Add Student</a></li>
                    <li><a href="/students/view">View Students</a></li>
                    <li><a href="/teachers/add">Add Teacher</a></li>
                    <li><a href="/teachers/view">View Teachers</a></li>
                    <li><a href="/batches/add">Add Batches</a></li>
                    <li><a href="/batches/view">View Batches</a></li>
                    <li><a href="/users/logout">Logout</a></li>
                </ul>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Hamburger Button -->
            <button class="hamburger" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>

            <!-- Welcome User in Header -->
            <div class="user-info">
                <span class="welcome-back">Welcome Back,</span> <span
                    th:text="${userEmail}">User</span>
            </div>

            <!-- Dashboard Overview -->
            <div class="dashboard-overview">
                <div class="card-deck">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Total Students</h5>
                            <p class="card-text" th:text="${totalStudents}">0</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Total Teachers</h5>
                            <p class="card-text" id="totalTeachers" th:text="${totalTeachers}">0</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Total Batches</h5>
                            <p class="card-text" id="totalBatches" th:text="${totalBatches}">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity / Achievements -->
            <div class="recent-activity">
                <h3>Recent Achievements</h3>
                <ul>
                    <li>Student John Doe won a Math competition.</li>
                    <li>Student Jane Smith achieved the highest attendance rate.</li>
                    <li>Student Emily Taylor completed the Science project with distinction.</li>
                </ul>
            </div>

            <!-- Class Schedule & Calendar (Based on Achievements) -->
            <div class="class-schedule">
                <h3>Class Schedule</h3>
                <ul>
                    <li>Math - Ms. Smith - 10:00 AM (Celebrating John's Achievement)</li>
                    <li>Science - Mr. John - 12:00 PM (Emily's Project Presentation)</li>
                    <li>Physical Education - Ms. Brown - 02:00 PM (Celebrating Highest Attendance)</li>
                </ul>
            </div>

            <!-- Inspirational Quote or Tip of the Day -->
            <div class="quote-section">
                <button class="btn" onclick="displayQuote()">Quote For You</button>
                <div id="quote"></div>
            </div>
        </div>
    </div>

    <!-- Footer at the Bottom -->
    <footer class="footer">
        <p>2008 - 2025 Kids Garden Grammar School All rights reserved.</p>
    </footer>

    <!-- AJAX for Real-Time Updates -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            // Fetch total teachers every 5 seconds
            setInterval(function() {
                $.ajax({
                    url : "/teachers/total",
                    method : "GET",
                    success : function(data) {
                        $("#totalTeachers").text(data);
                    }
                });
            }, 500); // Refresh every 5 seconds

            // Fetch total batches every 5 seconds
            setInterval(function() {
                $.ajax({
                    url : "/batches/total",
                    method : "GET",
                    success : function(data) {
                        $("#totalBatches").text(data);
                    }
                });
            }, 500); // Refresh every 5 seconds
        });
    </script>
</body>
</html>
